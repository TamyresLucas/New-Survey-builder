# App Changelog - 2025-12-01

## 1. Remove "Copy and Paste" Button from Skip Logic

**Time**: 10:05 AM (Approximate)

**Written Request**:
> Remove the button copy and paste from Skip logic

**Improvements**:
- **Simplified UI**: The "Copy and Paste" button and its associated "Advanced Logic Editor" (text-based input) were removed from the Skip Logic interfaces. This reduces clutter and focuses the user on the primary visual builder.
- **Code Cleanup**: Removed unused state variables (`isPasting`) and helper functions (`handlePasteLogic`) that were only used for this feature.
- **Consistency**: The "Add Skip Logic" button is now the sole entry point, making the workflow more consistent across different logic editors.

**Technical Changes**:
- **Modified `components/logic-editor/SkipLogicEditor.tsx`**:
    - Removed `isPasting` state and `handlePasteLogic` function.
    - Removed imports for `AdvancedLogicEditor` and `CopyAndPasteButton`.
    - Simplified the render logic to remove the conditional rendering of the text editor.
- **Modified `components/logic-editor/BlockSkipLogicEditor.tsx`**:
    - Removed `isPasting` state and `handlePasteLogic` function.
    - Removed imports for `AdvancedLogicEditor` and `CopyAndPasteButton`.
    - Simplified the render logic.
- **Modified `components/BlockEditor.tsx`**:
    - Removed the local `BlockSkipLogicEditor` implementation's `isPasting` state and `handlePasteLogic`.
    - Removed the `PasteInlineForm` and `CopyAndPasteButton` usage in the Skip Logic tab.

## 2. Logic Navigation Fixes and UI Consistency

**Time**: 2:00 PM (Approximate)

**Written Request**:
> Fixing Logic Navigation
> ensure the headings (Build, edit, bulk edit, survey structure) are all consistent. Survey structure should be the reference for typography and font size
> in survey canvas, have the radio button option when selected (like in Q1_1), the color should be the primary. Ensure color tokens are updated accordingly

**Improvements**:
- **Enhanced Logic Navigation**: Clicking on a logic card (specifically branching logic) now correctly opens the right sidebar, switches to the appropriate tab, and scrolls to the specific logic condition.
- **Granular Focus**: Individual conditions within a branching logic display are now clickable for precise navigation.
- **UI Consistency**: Updated headings in the Build Panel, Right Sidebar, Block Sidebar, and Bulk Edit Panel to use the 'Outfit' font and medium weight, matching the Survey Structure widget.
- **Visual Polish**: The selected radio button icon in the Question Card now uses the primary color token for better visibility and adherence to the design system.

**Technical Changes**:
- **Modified `App.tsx`**: Updated `handleSelectQuestion` to respect `focusOn` and `tab` options, ensuring the correct sidebar tab is activated.
- **Modified `components/LogicDisplays.tsx`**: Updated `BranchingLogicDisplay` to make individual conditions clickable, passing their IDs to the selection handler.
- **Modified `components/QuestionCard.tsx`**: Updated the selected radio button icon to use the `text-primary` class.
- **Modified `components/BuildPanel.tsx`, `components/RightSidebar.tsx`, `components/BlockSidebar.tsx`, `components/BulkEditPanel.tsx`**: Updated `<h2>` headings to use `font-family: 'Outfit', sans-serif` and `font-medium` weight.

## 3. System Notification & UI Consistency Updates

**Time**: 4:30 PM (Approximate)

**Written Request**:
> Refining Logic Modals
> ensure all system notification modals are aligned in the bottom right corner
> Can you add the border to the system modal component? Use the image and the code below just as reference.
> ensure Undo follow the same design patterns as other tertiary buttons (Except + Add buttons)
> the hover color on Cancel button looks darker than other tertiary buttons in light mode. Can you verify if there is an inconsistency?
> Cancel button under Edit question > behavior > question display logic is still not in the right color

**Improvements**:
- **Refined Logic Validation Notifications**: Aggregated logic validation errors into a single toast notification per action, preventing duplicate alerts.
- **System Notification Styling**: 
    - Moved notifications to the bottom right corner.
    - Updated error toast style to match design reference (Pink background, Red border).
    - Updated "Undo" button to follow tertiary button patterns (rounded, no underline, subtle hover).
- **UI Consistency**: 
    - Fixed inconsistent hover colors for "Cancel" buttons in `ImportSurveyModal` and `AdvancedLogicEditor` (Question Display Logic), ensuring they match the standard tertiary button style.

**Technical Changes**:
- **Modified `state/surveyReducer.ts`**: Refactored `validateAndCleanLogicAfterMove` to return messages instead of triggering side effects directly, ensuring single notification dispatch.
- **Modified `App.tsx`**: 
    - Added `useEffect` to handle logic validation messages.
    - Updated Toast component styles (position, colors, border).
    - Updated "Undo" button styles.
- **Modified `components/ImportSurveyModal.tsx`**: Updated Cancel button hover class to `hover:bg-surface-container-high`.
- **Modified `components/logic-editor/shared/AdvancedLogicEditor.tsx`**: Updated Cancel button styles to match standard tertiary buttons (`text-primary`, `font-button-primary`).
