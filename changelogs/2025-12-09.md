# App Changelog - 2025-12-09

## 1. Visual Refresh & Standardization

**Time**: 5:00 PM

**Written Request**:
> Update General Border Token & Standardize Inputs

**Improvements**:
- **Updated General Border Color**: Changed the global border token (`--border-bd-def`) to `#E0E4FF` (periwinkle tint) in light mode for a fresher, more premium look.
- **Structural UI Updates**: Applied the new border color to the Header, SubHeader, Left Sidebar, Build Panel, Right Sidebar, Question Cards, and Block Editor.
- **Input Field Standardization**: Standardized all text inputs, text areas, and dropdowns to use consistent background (`--input-bg`), border (`--input-border`), and text colors, along with `font-normal` weight.
- **Button Styling**: Updated the "Secondary" button variant and the "Copy Link" button in the header to explicitly use the new border color token.
- **Logic Editor UX**: Updated skip logic creation to default to an empty choice selection, requiring explicit user input.

**Technical Changes**:
- **Updated `index.html`**: Modified `--border-bd-def` CSS variable.
- **Updated `Header.tsx`, `SubHeader.tsx`, `LeftSidebar.tsx`**: Replaced standard border classes with specific token references.
- **Updated `RightSidebar.tsx`, `BuildPanel.tsx`, `BlockEditor.tsx`, `QuestionCard.tsx`**: Updated border utility classes to use the new token.
- **Updated `Button.tsx`**: Fixed secondary button variant border color.
- **Updated `SkipLogicEditor.tsx`**: Changed default state for new logic rules.
- **Standardized Inputs**: Updated `TextField.tsx`, `TextArea.tsx`, `DropdownField.tsx`, and various logic editor components to use standardized input tokens.

## 2. Logic Editor Organization & Diagram Visuals

**Time**: 5:45 PM

**Written Request**:
> Reorganize Logic Editor sections and refine Diagram Canvas visuals.

**Improvements**:
- **Logic Editor Reorganization**: Moved the "Branching Logic" section from the *Advanced* tab to the *Behavior* tab, nesting it within the "Navigation" section for better discoverability.
- **Improved Function Descriptions**: Updated the descriptive text for both "Skip Logic" and "Branching Logic" to be more precise and action-oriented.
    - *Skip Logic*: "Skip respondents to questions within the same block based on their answers."
    - *Branching Logic*: "Redirect respondents to different blocks, sections, or survey paths within this survey based on their answers."
- **Diagram Visuals**: Enhanced the Survey Flow Diagram by updating connector lines (edges) and arrow tips.
    - **Consistent Styling**: Arrow tips now always match the color of the connector line.
    - **Adaptive Contrast**: Introduced a new token `--diagram-edge-def` to ensure connectors are "Off Black" (`#232323`) in Light Mode for sharpness, while reverting to a softer gray in Dark Mode for readability.

**Technical Changes**:
- **Updated `BehaviorTab.tsx` & `AdvancedTab.tsx`**: Moved `BranchingLogicEditor` component placement.
- **Updated `BranchingLogicEditor.tsx` & `SkipLogicEditor.tsx`**: Updated UI labels and description text.
- **Updated `DiagramCanvas.tsx`**: Refactored edge creation logic to explicitly set `markerEnd` color and use the new css variable.
- **Updated `index.html`**: Defined `--diagram-edge-def` CSS variable for light and dark modes and updated React Flow style overrides.

## 3. Logic Editor UI Refinements & Consistency

**Time**: 7:15 PM

**Written Request**:
> Refine Logic Editor Consistency (UI styling, button standardization, field visibility)

**Improvements**:
- **Block Sidebar Cleanup**: The "Continue to" field and its accompanying info message are now completely hidden when exhaustive branching logic overrides them, reducing UI clutter.
- **Skip Logic UI Polishing**:
    - Removed unnecessary separator lines above the "Add logic set" button.
    - Updated the "Add logic set" button to use the standard `Button` component with correct hover effects (`tertiary-primary` variant).
    - Added a "+ Add condition" button to individual Skip Logic sets (UI placeholder for future multi-condition support).
- **Button Standardization**: Standardized the size, padding, and hover states of "Add" buttons across all logic editors (Skip, Block Skip, Display, Question Display) to ensure visual consistency.

**Technical Changes**:
- **Updated `BlockSidebar.tsx`**: Changed conditional rendering logic to return `null` for the "Continue to" section when disabled.
- **Updated `SkipLogicEditor.tsx`**: Removed wrapper divs and border classes; replaced native `<button>` with `<Button>` component.
- **Updated `SkipLogicSet.tsx`**: Added the new "+ Add condition" button to the footer.
- **Updated `BlockSkipLogicEditor.tsx`, `BlockDisplayLogicEditor.tsx`, `QuestionDisplayLogicEditor.tsx`**: Applied standardized classes and structure to main action buttons.
