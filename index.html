<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Survey Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: 'var(--semantic-pri)', /* Used for primary actions, links, and "Add" buttons */
            'on-primary': 'var(--text-txt-on-primary)',
            'primary-container': 'var(--notification-info-bg)',
            'on-primary-container': 'var(--notification-info-txt)',

            surface: 'var(--md-sys-color-surface)',
            'surface-dim': 'var(--md-sys-color-surface-dim)',
            'surface-bright': 'var(--md-sys-color-surface-bright)',
            'surface-container-lowest': 'var(--md-sys-color-surface-container-lowest)',
            'surface-container-low': 'var(--md-sys-color-surface-container-low)',
            'surface-container': 'var(--md-sys-color-surface-container)',
            'surface-container-high': 'var(--md-sys-color-surface-container-high)',
            'surface-container-highest': 'var(--md-sys-color-surface-container-highest)',

            'on-surface': 'var(--text-txt-pri)',
            'on-surface-variant': 'var(--text-txt-sec)',
            'on-surface-disabled': 'var(--text-txt-on-color-disable)',

            outline: 'var(--border-bd-def)',
            'outline-variant': 'var(--border-bd-dis)',
            'outline-hover': 'var(--border-bd-hov)',
            'input-border': 'var(--input-field-input-bd-def)',
            'input-border-hover': 'var(--input-field-input-bd-hov)',
            'button-border': 'var(--button-btn-bd-def)',
            'input-bg': 'var(--input-field-input-bg-def)',

            error: 'var(--semantic-err)',
            'on-error': 'var(--text-txt-on-color)',
            'error-container': 'var(--notification-err-bg)',
            'on-error-container': 'var(--notification-err-txt)',

            warning: 'var(--semantic-warn)',
            'on-warning': 'var(--text-txt-on-color)',
            'warning-container': 'var(--notification-warn-bg)',
            'on-warning-container': 'var(--notification-warn-txt)',

            success: 'var(--semantic-suc)',
            'on-success': 'var(--text-txt-on-success)',
            'success-container': 'var(--notification-suc-bg)',
            'on-success-container': 'var(--notification-suc-txt)',
          },
          accentColor: {
            primary: 'var(--semantic-pri)',
          },
          boxShadow: {
            'elevation-1': 'var(--elevation-1)',
            'elevation-2': 'var(--elevation-2)',
            'elevation-3': 'var(--elevation-3)',
            'elevation-4': 'var(--elevation-4)',

            // New Elevation Surface Tokens
            'surface-0': 'var(--surface-0)',
            'surface-1': 'var(--surface-1)',
            'surface-2': 'var(--surface-2)',
            'surface-3': 'var(--surface-3)',
            'surface-4': 'var(--surface-4)',
            'surface-5': 'var(--surface-5)',

            // Added secondary color
            secondary: 'var(--color-secondary)',
          },
          transitionDuration: {
            'instant': 'var(--duration-instant)',
            'fast': 'var(--duration-fast)',
            'normal': 'var(--duration-normal)',
            'slow': 'var(--duration-slow)',
          },
          fontWeight: {
            'button-text': 'var(--button-text-weight)',
            'button-primary': 'var(--button-primary-weight)',
            'button-operator': 'var(--button-operator-weight)',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700;800&family=Outfit:wght@300;500;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400,1,0" />
  <link rel="stylesheet" href="https://unpkg.com/@xyflow/react@12.8.6/dist/style.css" />

  <!-- Design System Tokens Import (enables token sync) -->
  <link rel="stylesheet" href="./packages/design-system/src/index.css" />

  <style id="custom-theme">
    :root {
      /* ============================================
         SHADCN/DESIGN SYSTEM TOKEN NOMENCLATURE
         These tokens follow the Design System naming
         and reference the legacy Voxco values below
         ============================================ */

      /* Core Background & Foreground */
      --background: var(--md-sys-color-surface);
      --foreground: var(--text-txt-pri);

      /* Card & Popover */
      --card: var(--md-sys-color-surface-container);
      --card-foreground: var(--text-txt-pri);
      --popover: var(--background--surface-bg-def);
      --popover-foreground: var(--text-txt-pri);

      /* Primary */
      --primary: var(--semantic-pri);
      --primary-foreground: var(--text-txt-on-primary);

      /* Secondary */
      --secondary: var(--button-button-secondary);
      --secondary-foreground: var(--text-txt-pri);

      /* Muted */
      --muted: var(--background--surface-bg-hov);
      --muted-foreground: var(--text-txt-sec);

      /* Accent */
      --accent: var(--background--surface-bg-sel);
      --accent-foreground: var(--text-txt-pri);

      /* Status Colors */
      --destructive: var(--semantic-err);
      --destructive-foreground: var(--text-txt-on-color);
      --success: var(--semantic-suc);
      --success-foreground: var(--text-txt-on-success);
      --warning: var(--semantic-warn);
      --warning-foreground: var(--text-txt-on-color);
      --info: var(--semantic-info);
      --info-foreground: var(--notification-info-txt);

      /* Status Backgrounds & Borders */
      --background-destructive: var(--notification-err-bg);
      --border-destructive: var(--notification-err-bd);
      --background-success: var(--notification-suc-bg);
      --border-success: var(--notification-suc-bd);
      --background-warning: var(--notification-warn-bg);
      --border-warning: var(--notification-warn-bd);
      --background-info: var(--notification-info-bg);
      --border-info: var(--notification-info-bd);

      /* Secondary Hover & Disabled States */
      --secondary-hover: var(--button-button-secondary-hover);
      --disabled-foreground: var(--text-txt-on-color-disable);
      --placeholder-foreground: var(--text-txt-sec);

      /* Border & Input */
      --border: var(--border-bd-def);
      --input: var(--input-field-input-bd-def);
      --ring: var(--border-bd-sel);

      /* Chart Colors */
      --chart-1: var(--foundation-chart-grape);
      --chart-2: var(--foundation-chart-mint);
      --chart-3: var(--foundation-chart-blackberry);
      --chart-4: var(--foundation-chart-lime);
      --chart-5: var(--foundation-chart-peach);

      /* ============================================
         TYPOGRAPHY TOKENS
         ============================================ */

      /* Font Family */
      --font-family-sans: "Open Sans", system-ui, sans-serif;
      --font-family-heading: var(--font-family-sans);
      --font-family-body: var(--font-family-sans);
      --font-sans: var(--font-family-sans);

      /* Font Sizes */
      --font-size-xs: 0.75rem;
      /* 12px */
      --font-size-sm: 0.875rem;
      /* 14px */
      --font-size-base: 1rem;
      /* 16px */
      --font-size-lg: 1.125rem;
      /* 18px */
      --font-size-xl: 1.25rem;
      /* 20px */
      --font-size-2xl: 1.5rem;
      /* 24px */
      --font-size-3xl: 1.875rem;
      /* 30px */
      --font-size-4xl: 2.25rem;
      /* 36px */

      /* Line Heights */
      --line-height-none: 1;
      --line-height-tight: 1.25;
      --line-height-snug: 1.375;
      --line-height-normal: 1.5;
      --line-height-relaxed: 1.625;
      --line-height-loose: 2;

      /* Font Weights */
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 600;
      --font-weight-bold: 700;
      --font-weight-extrabold: 800;

      /* Semantic Typography */
      --typography-h1-size: var(--font-size-4xl);
      --typography-h1-weight: var(--font-weight-extrabold);
      --typography-h1-lh: var(--line-height-tight);
      --typography-body-size: var(--font-size-base);
      --typography-body-weight: var(--font-weight-normal);
      --typography-body-lh: var(--line-height-relaxed);

      /* Radius */
      --radius: 0.5rem;

      /* ============================================
         LEGACY VOXCO TOKENS (Original Values)
         ============================================ */

      /* Light Mode Tokens */

      --semantic-pri: var(--foundation-periwinkle-dark);
      --semantic-suc: var(--foundation-green-dark);
      --semantic-err: var(--foundation-coral);
      --semantic-suc-hov: var(--foundation-green);
      --semantic-err-hov: var(--foundation-coral);
      --semantic-warn: var(--foundation-tangerine);
      --semantic-info: var(--foundation-periwinkle-dark);
      --semantic-shd: #232323;
      /* Material Design 3 Surface System */
      --md-sys-color-surface: var(--foundation-neutral-scale-primary-10);
      --md-sys-color-surface-dim: var(--foundation-neutral-scale-primary-20);
      --md-sys-color-surface-bright: var(--foundation-white);
      --md-sys-color-surface-container-lowest: var(--foundation-primary-gradients-primary-5);
      --md-sys-color-surface-container-low: var(--foundation-white);
      --md-sys-color-surface-container: var(--foundation-white);
      --md-sys-color-surface-container-high: var(--foundation-white);
      --md-sys-color-surface-container-highest: var(--foundation-white);

      /* Legacy tokens for backward compatibility - will be removed after component updates */
      --background--surface-bg: var(--md-sys-color-surface);
      --background--surface-bg-def: var(--md-sys-color-surface-container);
      --background--surface-bg-sel: var(--md-sys-color-surface-container-highest);
      --background--surface-bg-hov: var(--md-sys-color-surface-container-high);
      --background--surface-bg-dis: var(--md-sys-color-surface-container);
      --notification-err-bg: var(--foundation-coral-light);
      --notification-warn-bg: var(--foundation-tangerine-light);
      --notification-suc-bg: var(--foundation-green-light);
      --notification-info-bg: var(--foundation-primary-gradients-primary-20);
      --border-bd-def: #E0E4FF;
      --border-bd-hov: #9CA3AF;
      --border-bd-sel: var(--foundation-periwinkle-dark);
      --border-bd-dis: #E5E7EB;
      --button-btn-bd-def: #232323;
      --notification-err-bd: var(--foundation-coral);
      --notification-err-txt: var(--foundation-coral-dark);
      --notification-info-txt: var(--foundation-periwinkle-dark);
      --input-field-input-bd-def: #6B7280;
      --input-field-input-bd-sel: var(--foundation-periwinkle-dark);
      --input-field-input-txt: var(--text-txt-pri);
      --input-field-input-bd-dis: var(--background--surface-bg-dis);
      --input-field-input-bg-def: var(--foundation-white);
      --input-field-input-bd-hov: var(--semantic-pri);
      --button-button-tertiary: var(--foundation-neutral-scale-primary-100);
      --button-button-secondary-alt: var(--foundation-neutral);
      --button-button-secondary: transparent;
      --button-button-secondary-hover: var(--background--surface-bg-hov);
      --text-txt-on-color: var(--foundation-white);
      --text-txt-on-primary: var(--foundation-white);
      --text-txt-on-success: var(--foundation-white);
      --button-button-tertiary-alt: var(--foundation-periwinkle-dark);
      --button-button-primary: var(--foundation-periwinkle-dark);
      --button-button-primary-hover: var(--foundation-primary-gradients-primary-100);
      --button-button-tertiary-hover: var(--foundation-periwinkle);
      --button-button-danger: var(--foundation-coral-dark);
      --button-button-success: var(--foundation-green-dark);
      --button-button-danger-hover: var(--foundation-coral);
      --button-button-success-hover: var(--foundation-green);
      --text-txt-on-color-disable: var(--foundation-primary-gradients-primary-40);
      --button-button-primary-disabled: var(--foundation-primary-gradients-primary-10);
      --button-button-secondary-disabled: var(--foundation-primary-gradients-primary-40);
      --text-txt-pri: var(--foundation-neutral);
      --text-txt-sec: var(--foundation-neutral-80);
      --text-hyperlink-def: var(--foundation-neutral);
      --text-hyperlink-hov: var(--foundation-periwinkle);
      --thumbnail-thumbnail-bd-def: #DEE2FF;
      --thumbnail-thumbnail-bd-sel: var(--foundation-periwinkle);
      --thumbnail-thumbnail-bd-hov: #232323;
      --thumbnail-thumbnail-icon-def: var(--foundation-primary-gradients-primary-60);
      --thumbnail-thumbnail-icon-sel: var(--foundation-periwinkle-dark);
      --menu-menu-def: var(--foundation-neutral);
      --menu-menu-hov: var(--foundation-periwinkle);
      --menu-menu-sel: var(--foundation-periwinkle-dark);
      --semantic-pri-hov: var(--foundation-periwinkle);
      --login-login-err: #ef576b;
      --login-login-sec: #00a078;
      --login-login-pri: #5a6eff;
      --text-txt-sel: var(--foundation-periwinkle);
      --notification-suc-bd: var(--foundation-green);
      --notification-suc-txt: var(--foundation-green-dark);
      --foundation-periwinkle-dark: #5568f2;
      --foundation-primary-gradients-primary-100: var(--foundation-periwinkle);
      --foundation-primary-gradients-primary-60: #9ca8ff;
      --foundation-primary-gradients-primary-40: #bdc5ff;
      --foundation-primary-gradients-primary-20: #dee2ff;
      --foundation-primary-gradients-primary-10: #eff1ff;
      --foundation-primary-gradients-primary-5: #f6f7ff;
      --foundation-green-dark: #008563;
      --foundation-coral-dark: #cf455c;
      --foundation-neutral: #232323;
      --foundation-neutral-80: #4f4f4f;
      --foundation-tangerine: #ec6b09;
      --foundation-periwinkle: #5a6eff;
      --foundation-green: #00a078;
      --foundation-coral: #ef576b;
      --foundation-black: #191a1a;
      --foundation-white: #ffffff;
      --foundation-off-black: #232323;
      --foundation-tangerine-light: #fff6ef;
      --foundation-coral-light: #feeff1;
      --foundation-green-light: #e6f6f2;
      --notification-warn-txt: var(--foundation-tangerine);
      --notification-warn-bd: var(--foundation-tangerine);
      --notification-info-bd: var(--foundation-periwinkle);
      --foundation-periwinkle-light: #eff1ff;
      --background--surface-bg-sel-hov: var(--foundation-periwinkle);
      --table-bg-row-def: var(--background--surface-bg-def);
      --background--surface-bg-empty: var(--foundation-primary-gradients-primary-20);
      --background--surface-bg-filled: var(--foundation-periwinkle-dark);
      --thumbnail-thumbnail-bg-def: var(--foundation-primary-gradients-primary-5);
      --thumbnail-thumbnail-bg-sel: var(--foundation-primary-gradients-primary-10);
      --categories-cat-txt-1: var(--foundation-chart-grape);
      --categories-cat-bg-1: var(--foundation-chart-grape-20);
      --categories-cat-bg-9: var(--foundation-chart-grey-20);
      --categories-cat-bg--2: var(--foundation-chart-watermelon-10);
      --categories-cat-txt-2: var(--foundation-chart-watermelon);
      --categories-cat-bg--3: var(--foundation-chart-blackberry-10);
      --categories-cat-txt-3: var(--foundation-chart-blackberry);
      --categories-cat-bg--4: var(--foundation-chart-blueberry-20);
      --categories-cat-txt-4: var(--foundation-chart-blueberry);
      --sentiment-sent-positive-txt: var(--foundation-chart-avocado);
      --nps-nps-10: var(--foundation-chart-avocado);
      --foundation-chart-grape: #8e25d0;
      --foundation-chart-watermelon: #ed4e94;
      --foundation-chart-blackberry: #4833eb;
      --foundation-chart-blueberry: var(--foundation-periwinkle);
      --foundation-chart-grey: #707d89;
      --foundation-chart-lime: #639933;
      --categories-cat-txt-9: var(--foundation-chart-grey);
      --tags-tag-bd-icon--1: var(--foundation-chart-grey);
      --foundation-chart-peach: #ef664e;
      --foundation-chart-mint: #00a39b;
      --foundation-chart-watermelon-10: #feeef5;
      --foundation-chart-grape-20: #e8daff;
      --foundation-chart-blackberry-10: #dad6fb;
      --foundation-chart-blueberry-20: #cce9f6;
      --foundation-chart-mint-20: #ccedeb;
      --foundation-chart-peach-20: #fce0dc;
      --foundation-chart-lime-20: #e0ebd6;
      --foundation-chart-grey-20: #e2e5e7;
      --foundation-chart-apple: var(--foundation-coral);
      --foundation-chart-apple-20: var(--foundation-coral-light);
      --foundation-chart-avocado: var(--foundation-green);
      --foundation-chart-avocado-10: #cef1e1;
      --categories-cat-bg--5: var(--foundation-chart-mint-20);
      --categories-cat-txt-5: var(--foundation-chart-mint);
      --categories-cat-bg--6: var(--foundation-chart-peach-20);
      --categories-cat-txt-6: var(--foundation-chart-peach);
      --categories-cat-bg--7: var(--foundation-chart-lime-20);
      --categories-cat-txt-7: var(--foundation-chart-lime);
      --categories-cat-bg--8: var(--foundation-chart-avocado-10);
      --categories-cat-txt-8: var(--foundation-chart-avocado);
      --sentiment-sent-negative-txt: var(--foundation-chart-apple);
      --sentiment-sent-negative-mix-txt: var(--foundation-chart-peach);
      --sentiment-sent-positive-mix-txt: var(--foundation-chart-lime);
      --sentiment-sent-no-data-txt: var(--foundation-chart-grey);
      --tags-tag-bg--1: var(--foundation-chart-grey-20);
      --tags-tag-bg--2: var(--foundation-chart-apple-20);
      --tags-tag-bd-icon--2: var(--foundation-chart-apple);
      --tags-tag-bg--3: var(--foundation-chart-watermelon-10);
      --tags-tag-bd-icon--3: var(--foundation-chart-watermelon);
      --tags-tag-bg--4: var(--foundation-chart-grape-20);
      --tags-tag-bd-icon--4: var(--foundation-chart-grape);
      --tags-tag-bg--5: var(--foundation-chart-blueberry);
      --tags-tag-bd-icon--5: var(--foundation-chart-blackberry);
      --tags-tag-bg--6: var(--foundation-chart-mint);
      --tags-tag-bd-icon--6: var(--foundation-chart-blueberry-20);
      --tags-tag-bg--7: var(--foundation-chart-peach-20);
      --tags-tag-bd-icon--7: var(--foundation-chart-peach);
      --tags-tag-bg--8: var(--foundation-chart-lime-20);
      --tags-tag-bd-icon--8: var(--foundation-chart-lime);
      --tags-tag-bg--9: var(--foundation-chart-avocado-10);
      --tags-tag-bd-icon--9: var(--foundation-chart-avocado);
      --tags-tag-bg--10: #d4e2ff;
      --tags-tag-bd-icon--10: var(--foundation-periwinkle-dark);
      --tags-tag-bd-icon--3: #ffffff;
      --sentiment-sent-positive-bg: var(--foundation-chart-avocado-10);
      --sentiment-sent-negative-bg: var(--foundation-chart-apple-20);
      --sentiment-sent-negative-mix-bg: var(--foundation-chart-peach-20);
      --sentiment-sent-positive-mix-bg: var(--foundation-chart-lime-20);
      --sentiment-sent-no-data-bg: var(--foundation-chart-grey-20);
      --nps-nps-9: #64a86f;
      --nps-nps-8: #b6c94d;
      --nps-nps-7: #ddc63f;
      --nps-nps-6: #e9b341;
      --nps-nps-5: #e69d44;
      --nps-nps-4: #e28747;
      --nps-nps-3: #df714a;
      --nps-nps-2: #dc5a4d;
      --nps-nps-1: #d84650;
      --nps-nps-0: var(--foundation-coral-dark);
      --foundation-neutral-scale-primary-100: #232323;
      --foundation-neutral-scale-primary-90: #2d3047;
      --foundation-neutral-scale-primary-80: #404461;
      --foundation-neutral-scale-primary-70: #53577a;
      --foundation-neutral-scale-primary-60: #666b94;
      --foundation-neutral-scale-primary-50: #7a7eae;
      --foundation-neutral-scale-primary-40: #c9cfff;
      --foundation-neutral-scale-primary-30: #d4d9ff;
      --foundation-neutral-scale-primary-20: #e0e4ff;
      --foundation-neutral-scale-primary-10: #eff1ff;
      --foundation-chart-tangerine: var(--foundation-tangerine);
      --table-bd-row-def: var(--border-bd-def);
      --table-txt-row-def: var(--text-txt-pri);
      --table-txt-row-sel: var(--text-txt-sel-alt);
      --table-bd-row-sel: #ffffff;
      --table-bg-row-sel: var(--background--surface-bg-sel);
      --table-bg-row-hov: var(--background--surface-bg-hov);
      --table-txt-hdr-def: var(--text-txt-pri);
      --table-bd-hdr-def: var(--border-bd-def);
      --text-txt-sel-alt: var(--foundation-white);
      --table-bg-row-sel-hov: var(--foundation-neutral-scale-primary-60);
      --table-bd-hdr-def-alt: var(--foundation-neutral-scale-primary-40);
      --tags-tag-bd-icon--11: var(--foundation-chart-tangerine);
      --tags-tag-bg--11: #fffcf2;
      --button-button-tertiary-disabled: var(--foundation-primary-gradients-primary-40);
      --button-button-primary-active: var(--foundation-periwinkle-dark);
      --button-button-secondary-active: var(--foundation-primary-gradients-primary-100);
      --button-button-tertiary-active: var(--foundation-primary-gradients-primary-100);
      --button-button-danger-active: var(--notification-err-txt);
      --button-button-success-active: #007154;
      --border-bd-sel-alt: var(--foundation-white);
      --text-label-sel: var(--foundation-periwinkle-dark);
      --text-label-dang: var(--foundation-coral-dark);
      --text-label-suc: var(--foundation-green-dark);
      --text-highlight-lemon: #fff9b1;
      --text-highlight-lettuce: #d1f786;
      --text-highlight-highlight-tool: var(--foundation-periwinkle);
      --text-highlight-highlight-selection: var(--foundation-primary-gradients-primary-40);
      --foundation-primary-gradients-primary-80: #7b8bff;

      /* Specific Token for Diagram Edges */
      --diagram-edge-def: var(--foundation-off-black);

      /* Button font weights */
      --button-text-weight: 600;
      --button-primary-weight: 600;
      --button-operator-weight: 600;

      /* Elevation Tokens */
      --elevation-0: none;
      --elevation-1: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --elevation-2: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --elevation-3: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --elevation-4: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

      /* Animation Tokens */
      --duration-instant: 75ms;
      --duration-fast: 150ms;
      --duration-normal: 300ms;
      --duration-slow: 500ms;
      --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
      --easing-decelerate: cubic-bezier(0, 0, 0.2, 1);
      --easing-accelerate: cubic-bezier(0.4, 0, 1, 1);
    }

    .dark {
      color-scheme: dark;

      /* ============================================
         SHADCN/DESIGN SYSTEM TOKEN NOMENCLATURE
         Dark mode overrides
         ============================================ */

      /* Core Background & Foreground */
      --background: var(--md-sys-color-surface);
      --foreground: var(--text-txt-pri);

      /* Card & Popover */
      --card: var(--md-sys-color-surface-container);
      --card-foreground: var(--text-txt-pri);
      --popover: var(--background--surface-bg-def);
      --popover-foreground: var(--text-txt-pri);

      /* Primary */
      --primary: var(--semantic-pri);
      --primary-foreground: var(--text-txt-on-primary);

      /* Secondary */
      --secondary: var(--button-button-secondary);
      --secondary-foreground: var(--text-txt-pri);

      /* Muted */
      --muted: var(--background--surface-bg-hov);
      --muted-foreground: var(--text-txt-sec);

      /* Accent */
      --accent: var(--background--surface-bg-sel);
      --accent-foreground: var(--text-txt-pri);

      /* Status Colors */
      --destructive: var(--semantic-err);
      --destructive-foreground: var(--text-txt-on-color);
      --success: var(--semantic-suc);
      --success-foreground: var(--text-txt-on-success);
      --warning: var(--semantic-warn);
      --warning-foreground: var(--text-txt-on-color);
      --info: var(--semantic-info);
      --info-foreground: var(--notification-info-txt);

      /* Status Backgrounds & Borders */
      --background-destructive: var(--notification-err-bg);
      --border-destructive: var(--notification-err-bd);
      --background-success: var(--notification-suc-bg);
      --border-success: var(--notification-suc-bd);
      --background-warning: var(--notification-warn-bg);
      --border-warning: var(--notification-warn-bd);
      --background-info: var(--notification-info-bg);
      --border-info: var(--notification-info-bd);

      /* Secondary Hover & Disabled States */
      --secondary-hover: var(--button-button-secondary-hover);
      --disabled-foreground: var(--text-txt-on-color-disable);
      --placeholder-foreground: var(--text-txt-sec);

      /* Border & Input */
      --border: var(--border-bd-def);
      --input: var(--input-field-input-bd-def);
      --ring: var(--border-bd-sel);

      /* Chart Colors */
      --chart-1: var(--foundation-chart-grape);
      --chart-2: var(--foundation-chart-mint);
      --chart-3: var(--foundation-chart-blackberry);
      --chart-4: var(--foundation-chart-lime);
      --chart-5: var(--foundation-chart-peach);

      /* ============================================
         LEGACY VOXCO TOKENS (Dark Mode Values)
         ============================================ */

      /* Dark Mode Tokens */
      --semantic-pri: #b8beff;
      --semantic-suc: var(--foundation-green-dark);
      --semantic-err: var(--foundation-coral);
      --semantic-suc-hov: var(--foundation-green);
      --semantic-err-hov: var(--foundation-coral);
      --semantic-warn: var(--foundation-tangerine);
      --semantic-info: #6366f1;
      --semantic-shd: #000000;

      /* Material Design 3 Surface System */
      /* Old: #141318 / 84% sat - Updated to #12131a (15% sat) per Specs-CORRECTED */
      --md-sys-color-surface: #12131a;

      /* New Elevation System (Surface 0-5) */
      --surface-0: #12131a;
      --surface-1: #1e1f26;
      /* +5% lightness (approx) */
      --surface-2: #23242b;
      /* +8% lightness (approx) */
      --surface-3: #282930;
      /* +11% lightness (approx) */
      --surface-4: #2a2b32;
      /* +12% lightness (approx) */
      --surface-5: #2f3037;
      /* +14% lightness (approx) */

      /* Added Secondary Color */
      /* Old: #5FDD9D - Updated to #6bc59a */
      --color-secondary: #6bc59a;

      --md-sys-color-surface-dim: hsl(240 6% 6%);
      --md-sys-color-surface-bright: hsl(230 5% 20%);
      --md-sys-color-surface-container-lowest: hsl(230 5% 11%);
      --md-sys-color-surface-container-low: hsla(228, 18%, 14%, 0.97);
      --md-sys-color-surface-container: hsla(228, 18%, 14%, 0.97);
      --md-sys-color-surface-container-high: hsla(228, 18%, 14%, 0.97);
      --md-sys-color-surface-container-highest: hsla(228, 18%, 14%, 0.97);

      /* Dark mode elevation (stronger shadows) */
      --elevation-1: 0 1px 2px 0 rgb(0 0 0 / 0.3);
      --elevation-2: 0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.3);
      --elevation-3: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3);
      --elevation-4: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.4);

      /* Legacy tokens for backward compatibility - will be removed after component updates */
      --background--surface-bg: var(--md-sys-color-surface);
      --background--surface-bg-def: var(--md-sys-color-surface-container-low);
      --background--surface-bg-sel: var(--md-sys-color-surface-container-highest);
      --background--surface-bg-hov: var(--md-sys-color-surface-container-high);
      --background--surface-bg-dis: var(--foundation-primary-gradients-primary-100);
      --notification-err-bg: var(--foundation-coral-light);
      --notification-warn-bg: var(--foundation-tangerine-light);
      --notification-suc-bg: var(--foundation-green-light);
      --notification-info-bg: var(--foundation-primary-gradients-primary-20);
      /* Old: #938F99 - Updated to #aca8b3 per Specs-CORRECTED */
      --border-bd-def: #aca8b3;
      --border-bd-hov: #6B7280;
      --border-bd-sel: var(--foundation-periwinkle-dark);
      --border-bd-dis: #1F2937;
      --button-btn-bd-def: #FFFFFF;
      --notification-err-bd: var(--foundation-coral);
      --notification-err-txt: var(--foundation-coral-dark);
      --notification-info-txt: var(--foundation-periwinkle-dark);
      --input-field-input-bd-def: #9CA3AF;
      --input-field-input-bd-sel: var(--foundation-periwinkle-dark);
      --input-field-input-txt: var(--text-txt-pri);
      --input-field-input-bd-dis: var(--background--surface-bg-dis);
      --input-field-input-bg-def: var(--foundation-off-black);
      --input-field-input-bd-hov: var(--semantic-pri);
      --button-button-tertiary: var(--foundation-neutral);
      --button-button-secondary-alt: var(--foundation-neutral);
      --button-button-secondary: transparent;
      --button-button-secondary-hover: var(--background--surface-bg-hov);
      --text-txt-on-color: var(--foundation-white);
      --text-txt-on-primary: #1b1f50;
      --text-txt-on-success: #1b1f50;
      --button-button-tertiary-alt: var(--foundation-periwinkle-dark);
      --button-button-primary: var(--foundation-periwinkle-dark);
      --button-button-primary-hover: var(--foundation-primary-gradients-primary-100);
      --button-button-tertiary-hover: var(--foundation-periwinkle);
      --button-button-danger: var(--foundation-coral-dark);
      --button-button-success: var(--foundation-green-dark);
      --button-button-danger-hover: var(--foundation-coral);
      --button-button-success-hover: var(--foundation-green);
      --text-txt-on-color-disable: var(--foundation-neutral-scale-primary-50);
      --button-button-primary-disabled: var(--foundation-neutral-scale-primary-90);
      --button-button-secondary-disabled: var(--foundation-neutral-scale-primary-60);
      --text-txt-pri: var(--foundation-white);
      --text-txt-sec: #ffffff;
      --text-hyperlink-def: var(--foundation-white);
      --text-hyperlink-hov: var(--foundation-periwinkle);
      --thumbnail-thumbnail-bd-def: var(--foundation-primary-gradients-primary-40);
      --thumbnail-thumbnail-bd-sel: var(--foundation-periwinkle);
      --thumbnail-thumbnail-bd-hov: #ffffff;
      --thumbnail-thumbnail-icon-def: var(--foundation-primary-gradients-primary-60);
      --thumbnail-thumbnail-icon-sel: var(--foundation-periwinkle-dark);
      --menu-menu-def: var(--foundation-neutral);
      --menu-menu-hov: var(--foundation-periwinkle);
      --menu-menu-sel: var(--foundation-periwinkle-dark);
      --semantic-pri-hov: var(--foundation-periwinkle);
      --login-login-err: #ef576b;
      --login-login-sec: #00a078;
      --login-login-pri: #5a6eff;
      --text-txt-sel: var(--foundation-periwinkle);
      --notification-suc-bd: var(--foundation-green);
      --notification-suc-txt: var(--foundation-green-dark);
      --foundation-periwinkle-dark: #b8beff;
      --foundation-primary-gradients-primary-100: var(--foundation-periwinkle);
      --foundation-primary-gradients-primary-60: #364299;
      --foundation-primary-gradients-primary-40: #242c66;
      --foundation-primary-gradients-primary-20: #1a1f3d;
      --foundation-primary-gradients-primary-10: #121633;
      --foundation-primary-gradients-primary-5: #101223;
      --foundation-green-dark: #72dab9;
      --foundation-coral-dark: #ef576b;
      --foundation-neutral: #ffffff;
      --foundation-neutral-80: #ffffff;
      --foundation-tangerine: #f9a05b;
      --foundation-periwinkle: #b8beff;
      --foundation-green: #00a078;
      --foundation-coral: #ef576b;
      --foundation-black: #191a1a;
      --foundation-white: #ffffff;
      --foundation-off-black: #232323;
      --foundation-tangerine-light: #393029;
      --foundation-coral-light: #38292b;
      --foundation-green-light: #20302c;
      --notification-warn-txt: var(--foundation-tangerine);
      --notification-warn-bd: var(--foundation-tangerine);
      --notification-info-bd: var(--foundation-periwinkle);
      --foundation-periwinkle-light: #292b39;
      --background--surface-bg-sel-hov: var(--foundation-neutral-scale-primary-70);
      --table-bg-row-def: var(--foundation-off-black);
      --background--surface-bg-empty: var(--foundation-primary-gradients-primary-20);
      --background--surface-bg-filled: var(--foundation-periwinkle-dark);
      --thumbnail-thumbnail-bg-def: var(--foundation-primary-gradients-primary-5);
      --thumbnail-thumbnail-bg-sel: var(--foundation-primary-gradients-primary-10);
      --categories-cat-txt-1: var(--foundation-chart-grape);
      --categories-cat-bg-1: var(--foundation-chart-grape);
      --categories-cat-bg-9: var(--foundation-chart-grey-20);
      --categories-cat-bg--2: var(--foundation-chart-watermelon-10);
      --categories-cat-txt-2: var(--foundation-chart-watermelon);
      --categories-cat-bg--3: var(--foundation-chart-blackberry-10);
      --categories-cat-txt-3: var(--foundation-chart-blackberry);
      --categories-cat-bg--4: var(--foundation-chart-blueberry-20);
      --categories-cat-txt-4: var(--foundation-chart-blueberry);
      --sentiment-sent-positive-txt: var(--foundation-chart-avocado);
      --nps-nps-10: var(--foundation-chart-avocado);
      --foundation-chart-grape: #b24ac3;
      --foundation-chart-watermelon: #ed4e94;
      --foundation-chart-blackberry: #744ec6;
      --foundation-chart-blueberry: var(--foundation-periwinkle);
      --foundation-chart-grey: #707d89;
      --foundation-chart-lime: #86c54f;
      --categories-cat-txt-9: var(--foundation-chart-grey);
      --tags-tag-bd-icon--1: var(--foundation-chart-grey);
      --foundation-chart-peach: #ef6e57;
      --foundation-chart-mint: #00c3b8;
      --foundation-chart-watermelon-10: #38282f;
      --foundation-chart-grape-20: #382346;
      --foundation-chart-blackberry-10: #2a264b;
      --foundation-chart-blueberry-20: #1c3946;
      --foundation-chart-mint-20: #1c3d3b;
      --foundation-chart-peach-20: #4c302c;
      --foundation-chart-lime-20: #37432c;
      --foundation-chart-grey-20: #323537;
      --foundation-chart-apple: var(--foundation-coral);
      --foundation-chart-apple-20: var(--foundation-coral-light);
      --foundation-chart-avocado: var(--foundation-green);
      --foundation-chart-avocado-10: #1c3730;
      --categories-cat-bg--5: var(--foundation-chart-mint-20);
      --categories-cat-txt-5: var(--foundation-chart-mint);
      --categories-cat-bg--6: var(--foundation-chart-peach-20);
      --categories-cat-txt-6: var(--foundation-chart-peach);
      --categories-cat-bg--7: var(--foundation-chart-lime-20);
      --categories-cat-txt-7: var(--foundation-chart-lime);
      --categories-cat-bg--8: var(--foundation-chart-avocado-10);
      --categories-cat-txt-8: var(--foundation-chart-avocado);
      --sentiment-sent-negative-txt: var(--foundation-chart-apple);
      --sentiment-sent-negative-mix-txt: var(--foundation-chart-peach);
      --sentiment-sent-positive-mix-txt: var(--foundation-chart-lime);
      --sentiment-sent-no-data-txt: var(--foundation-chart-grey);
      --tags-tag-bg--1: var(--foundation-chart-grey-20);
      --tags-tag-bg--2: var(--foundation-chart-apple-20);
      --tags-tag-bd-icon--2: var(--foundation-chart-apple);
      --tags-tag-bg--3: var(--foundation-chart-watermelon-10);
      --tags-tag-bd-icon--3: var(--foundation-chart-watermelon);
      --tags-tag-bg--4: var(--foundation-chart-grape-20);
      --tags-tag-bd-icon--4: var(--foundation-chart-grape);
      --tags-tag-bg--5: var(--foundation-chart-blueberry);
      --tags-tag-bd-icon--5: var(--foundation-chart-blackberry-10);
      --tags-tag-bg--6: var(--foundation-chart-mint-20);
      --tags-tag-bd-icon--6: var(--foundation-chart-blueberry-20);
      --tags-tag-bg--7: var(--foundation-chart-peach-20);
      --tags-tag-bd-icon--7: var(--foundation-chart-peach);
      --tags-tag-bg--8: var(--foundation-chart-lime-20);
      --tags-tag-bd-icon--8: var(--foundation-chart-lime);
      --tags-tag-bg--9: var(--foundation-chart-avocado-10);
      --tags-tag-bd-icon--9: var(--foundation-chart-avocado);
      --tags-tag-bg--10: var(--foundation-periwinkle-light);
      --tags-tag-bd-icon--10: var(--foundation-periwinkle-dark);
      --tags-tag-bd-icon--3: #ffffff;
      --sentiment-sent-positive-bg: var(--foundation-chart-avocado-10);
      --sentiment-sent-negative-bg: var(--foundation-chart-apple-20);
      --sentiment-sent-negative-mix-bg: var(--foundation-chart-peach-20);
      --sentiment-sent-positive-mix-bg: var(--foundation-chart-lime-20);
      --sentiment-sent-no-data-bg: var(--foundation-chart-grey-20);
      --nps-nps-9: #5eb888;
      --nps-nps-8: #bbd262;
      --nps-nps-7: #e3d954;
      --nps-nps-6: #fad352;
      --nps-nps-5: #f8bd55;
      --nps-nps-4: #f6a65a;
      --nps-nps-3: #f48f5e;
      --nps-nps-2: #f27763;
      --nps-nps-1: #f05e68;
      --nps-nps-0: var(--foundation-coral-dark);
      --foundation-neutral-scale-primary-100: #0d0e1a;
      --foundation-neutral-scale-primary-90: #151729;
      --foundation-neutral-scale-primary-80: #1d203c;
      --foundation-neutral-scale-primary-70: #262a4a;
      --foundation-neutral-scale-primary-60: #363d65;
      --foundation-neutral-scale-primary-50: #4f5780;
      --foundation-neutral-scale-primary-40: #6a73a6;
      --foundation-neutral-scale-primary-30: #8e96c2;
      --foundation-neutral-scale-primary-20: #b8bdde;
      --foundation-neutral-scale-primary-10: #e0e2f0;
      --foundation-chart-tangerine: var(--foundation-tangerine);
      --table-bd-row-def: var(--border-bd-def);
      --table-txt-row-def: var(--text-txt-pri);
      --table-txt-row-sel: var(--text-txt-sel-alt);
      --table-bd-row-sel: var(--foundation-off-black);
      --table-bg-row-sel: var(--background--surface-bg-sel);
      --table-bg-row-hov: var(--background--surface-bg-hov);
      --table-txt-hdr-def: var(--text-txt-pri);
      --table-bd-hdr-def: var(--border-bd-def);
      --text-txt-sel-alt: var(--foundation-white);
      --table-bg-row-sel-hov: var(--foundation-neutral-scale-primary-60);
      --table-bd-hdr-def-alt: var(--foundation-neutral-scale-primary-40);
      --tags-tag-bd-icon--11: var(--foundation-chart-tangerine);
      --tags-tag-bg--11: var(--foundation-tangerine-light);
      --button-button-tertiary-disabled: var(--foundation-primary-gradients-primary-40);
      --button-button-primary-active: var(--foundation-neutral-scale-primary-70);
      --button-button-secondary-active: var(--foundation-neutral-scale-primary-70);
      --button-button-tertiary-active: var(--foundation-neutral-scale-primary-70);
      --button-button-danger-active: #cf455c;
      --button-button-success-active: #007154;
      --border-bd-sel-alt: var(--foundation-off-black);
      --text-label-sel: var(--foundation-periwinkle);
      --text-label-dang: var(--foundation-coral);
      --text-label-suc: var(--foundation-green);
      --text-highlight-lemon: #fff9b1;
      --text-highlight-lettuce: #d1f786;
      --text-highlight-highlight-tool: var(--foundation-periwinkle);
      --text-highlight-highlight-selection: var(--foundation-primary-gradients-primary-40);
      --foundation-primary-gradients-primary-80: #4858cc;
      --diagram-edge-def: var(--input-field-input-bd-def);
    }
  </style>
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
    }

    .material-symbols-rounded {
      user-select: none;
      /* Prevent text selection of icons */
      line-height: 1;
      vertical-align: middle;
      /* As per user request, fill all icons */
      font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    .material-symbols-rounded.unfilled {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    /* Custom React Flow Styles */
    .react-flow__edge-path {
      stroke: var(--diagram-edge-def);
      stroke-width: 2px;
    }

    .react-flow__edge.selected .react-flow__edge-path,
    .react-flow__edge:focus .react-flow__edge-path,
    .react-flow__edge:focus-visible .react-flow__edge-path {
      stroke: var(--semantic-pri);
      stroke-width: 3px;
    }

    .react-flow__edge.draft .react-flow__edge-path {
      stroke-dasharray: 6 6;
      stroke: color-mix(in srgb, var(--semantic-pri), transparent 30%);
    }

    .react-flow__edge.draft .react-flow__marker-end path {
      fill: color-mix(in srgb, var(--semantic-pri), transparent 30%);
    }

    .react-flow__edge.structural .react-flow__edge-path {
      stroke: var(--diagram-edge-def);
    }

    .dark .react-flow__edge.structural .react-flow__edge-path {
      stroke: var(--diagram-edge-def);
    }

    .react-flow__edge.structural .react-flow__marker-end path {
      fill: var(--diagram-edge-def);
    }

    .dark .react-flow__edge.structural .react-flow__marker-end path {
      fill: var(--diagram-edge-def);
    }

    .react-flow__edge-text {
      color: var(--text-txt-sec);
      font-size: 12px;
      background-color: var(--background--surface-bg);
      padding: 2px 4px;
      border-radius: 4px;
    }

    .react-flow__edge.selected .react-flow__edge-text {
      color: var(--semantic-pri);
      font-weight: 600;
    }

    .react-flow__marker-end path {
      fill: var(--diagram-edge-def);
    }

    .react-flow__edge.selected .react-flow__marker-end path {
      fill: var(--semantic-pri);
    }

    .dark .react-flow__background {
      background-color: var(--background--surface-bg);
    }

    .dark .react-flow__edge-path {
      stroke: var(--diagram-edge-def);
    }

    .dark .react-flow__edge-text {
      background-color: var(--background--surface-bg-sel);
      color: var(--text-txt-pri);
      padding: 4px 6px;
    }

    .dark .react-flow__marker-end path {
      fill: var(--diagram-edge-def);
    }

    /* React Flow Controls Dark Mode Overrides */
    .dark .react-flow__controls {
      background-color: var(--background--surface-bg-def);
      border: 1px solid var(--border-bd-dis);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
    }

    .dark .react-flow__controls button {
      background-color: transparent;
      border-bottom-color: var(--border-bd-dis);
    }

    .dark .react-flow__controls button:hover {
      background-color: var(--background--surface-bg-hov);
    }

    .dark .react-flow__controls button svg {
      fill: var(--text-txt-pri);
    }

    /* Logic Rule Highlight Animation */
    @keyframes logic-highlight-anim {
      from {
        background-color: color-mix(in srgb, var(--notification-info-bg), transparent 30%);
        outline: 2px solid var(--semantic-pri);
      }

      to {
        background-color: transparent;
        outline: 2px solid transparent;
      }
    }

    .logic-highlight {
      animation: logic-highlight-anim 2.5s ease-out forwards;
      outline-offset: 2px;
      border-radius: 6px;
    }

    /* Toast Animation */
    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in-up {
      animation: fade-in-up 0.4s ease-out forwards;
    }

    /* Dark Mode Checkbox Overrides */
    .dark input[type="checkbox"] {
      background-color: var(--background--surface-bg-def);
      border-color: var(--border-bd-def);
      color: var(--semantic-pri);
      accent-color: var(--semantic-pri);
    }

    .dark input[type="checkbox"]:checked {
      background-color: var(--semantic-pri);
      border-color: var(--semantic-pri);
    }

    /* Dark Mode Scrollbar Overrides */
    .dark ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    .dark ::-webkit-scrollbar-track {
      background: var(--background--surface-bg);
    }

    .dark ::-webkit-scrollbar-thumb {
      background: var(--border-bd-dis);
      border-radius: 5px;
      border: 2px solid var(--background--surface-bg);
    }

    .dark ::-webkit-scrollbar-thumb:hover {
      background: var(--border-bd-def);
    }
  </style>
</head>

<body>
  <div id="root">
    <div
      style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; color: #666;">
      Loading Survey Builder...
    </div>
  </div>
  <script type="module" src="/index.tsx"></script>
  <script>
    window.onerror = function (message, source, lineno, colno, error) {
      console.error('Global Error:', message, error);
      const root = document.getElementById('root');
      if (root) {
        root.innerHTML = `
            <div style="color: red; padding: 20px; font-family: sans-serif;">
              <h1>Application Error</h1>
              <p>The application failed to start.</p>
              <p>Error: ${message}</p>
              <pre>${error?.stack || ''}</pre>
            </div>
          `;
      }
    };

    window.onunhandledrejection = function (event) {
      console.error('Unhandled Rejection:', event.reason);
      const root = document.getElementById('root');
      if (root) {
        root.innerHTML = `
            <div style="color: red; padding: 20px; font-family: sans-serif;">
              <h1>Unhandled Promise Rejection</h1>
              <p>The application failed to start due to an async error.</p>
              <p>Error: ${event.reason}</p>
            </div>
          `;
      }
    };
  </script>
</body>

</html>